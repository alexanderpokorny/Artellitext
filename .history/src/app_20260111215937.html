<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="Artellico - Kognitive Denkplattform fÃ¼r akademisches Consulting und Wissensmanagement" />
		
		<!--
		===========================================
		CRITICAL RENDERING PATH - FOUC PREVENTION
		===========================================
		
		ORDER IS CRITICAL:
		1. Blocking script sets 'dark' class on <html>
		2. Critical inline CSS applies ALL visual base styles:
		   - @font-face definitions
		   - Font family, size, color
		   - Background colors
		   - CSS variables for both themes
		3. External CSS (app.css) loads ONLY non-critical styles
		   and MUST NOT redefine anything from critical CSS
		
		This inline CSS is the ONLY exception to the 
		"no inline CSS" rule - it's technically required to
		prevent flash of unstyled content (FOUC).
		===========================================
		-->
		
		<!-- 1. BLOCKING SCRIPT: Sets theme class before ANY rendering -->
		<script>
			(function() {
				var storedTheme = localStorage.getItem('artellico_theme');
				var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
				
				var shouldBeDark = false;
				if (storedTheme === 'dark') {
					shouldBeDark = true;
				} else if (storedTheme === 'light') {
					shouldBeDark = false;
				} else {
					shouldBeDark = prefersDark;
				}
				
				if (shouldBeDark) {
					document.documentElement.classList.add('dark');
				}
			})();
		</script>
		
		<!-- 2. CRITICAL INLINE CSS: All visual base styles -->
		<style>
			/* =========================================
			   @FONT-FACE DEFINITIONS
			   Must be here so browser knows fonts BEFORE first paint
			   ========================================= */
			@font-face {
				font-family: 'EB Garamond';
				src: url('/fonts/EBGaramond-Variable.ttf') format('truetype-variations');
				font-weight: 400 800;
				font-style: normal;
				font-display: block; /* Block rendering until font loads */
			}
			@font-face {
				font-family: 'EB Garamond';
				src: url('/fonts/EBGaramond-Italic-Variable.ttf') format('truetype-variations');
				font-weight: 400 800;
				font-style: italic;
				font-display: block;
			}
			@font-face {
				font-family: 'Special Elite';
				src: url('/fonts/SpecialElite-Regular.ttf') format('truetype');
				font-weight: 400;
				font-style: normal;
				font-display: block;
			}
			
			/* =========================================
			   CSS VARIABLES - LIGHT MODE (Default)
			   ========================================= */
			:root {
				/* Fonts */
				--font-human: 'EB Garamond', Georgia, 'Times New Roman', serif;
				--font-machine: 'Special Elite', 'Courier New', monospace;
				
				/* Font Sizes - FIXED values, no clamp for critical */
				--font-size-base: 1.0625rem; /* 17px - middle of clamp range */
				
				/* Light Mode Backgrounds */
				--color-bg: #f5f5f5;
				--color-bg-sidebar: #ebebeb;
				--color-bg-elevated: #ffffff;
				
				/* Light Mode Text */
				--color-text: #1a1a1a;
				--color-text-secondary: #4a4a4a;
				--color-text-muted: #6a6a6a;
				
				/* Light Mode Borders */
				--color-border: #d0d0d0;
			}
			
			/* =========================================
			   CSS VARIABLES - DARK MODE
			   ========================================= */
			html.dark {
				/* Dark Mode Backgrounds */
				--color-bg: #0a0a0a;
				--color-bg-sidebar: #171717;
				--color-bg-elevated: #262626;
				
				/* Dark Mode Text */
				--color-text: #fafafa;
				--color-text-secondary: #a3a3a3;
				--color-text-muted: #737373;
				
				/* Dark Mode Borders */
				--color-border: #404040;
			}
			
			/* =========================================
			   BASE ELEMENT STYLES
			   Applied immediately, prevents ANY flash
			   ========================================= */
			*, *::before, *::after {
				box-sizing: border-box;
			}
			
			html {
				font-size: 16px;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				background-color: var(--color-bg);
				color: var(--color-text);
			}
			
			body {
				margin: 0;
				padding: 0;
				font-family: var(--font-human);
				font-size: var(--font-size-base);
				line-height: 1.5;
				color: var(--color-text);
				background-color: var(--color-bg);
			}
		</style>
		
		<!-- Theme color for browser chrome -->
		<meta name="theme-color" content="#f5f5f5" media="(prefers-color-scheme: light)" />
		<meta name="theme-color" content="#0a0a0a" media="(prefers-color-scheme: dark)" />
		
		<!-- Preload fonts (hint to browser, actual @font-face is above) -->
		<link rel="preload" href="/fonts/EBGaramond-Variable.ttf" as="font" type="font/ttf" crossorigin />
		<link rel="preload" href="/fonts/SpecialElite-Regular.ttf" as="font" type="font/ttf" crossorigin />
		
		<!-- Favicon -->
		<link rel="icon" type="image/x-icon" href="%sveltekit.assets%/favicon.ico" />
		<link rel="icon" type="image/png" sizes="16x16" href="%sveltekit.assets%/favicon-16x16.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="%sveltekit.assets%/favicon-32x32.png" />
		<link rel="apple-touch-icon" sizes="180x180" href="%sveltekit.assets%/icons/apple-touch-icon.png" />
		<link rel="manifest" href="%sveltekit.assets%/manifest.json" />
		
		<title>Artellico</title>
		
		<!-- 3. SvelteKit injects external CSS here (app.css) -->
		<!-- IMPORTANT: app.css must NOT redefine @font-face, base font-family, 
		     font-size on html/body, or theme color variables -->
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
